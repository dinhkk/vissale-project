<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <style>
        body,pre{font-family:verdana,sans-serif}body,ul{margin:0}#logos,#plugin_box,.plugin_shade{float:right}.header_details,.plugin{border-spacing:0}#menu_group_head>a:hover,.add_note input,.link_bar a.selected,.link_bar a:hover,a.block_button:hover,a.button:hover,a.note_form_close:hover,a:link,a:visited{text-decoration:none}body{padding-top:0;font-size:1em}h1{font-size:1.1em;font-style:italic}h2{font-size:1.05em}h3{font-size:1em;color:#114C8D}img{border:none}a.button,img.border{border:1px solid #114C8D}pre{font-size:.7em}ul{list-style-type:circle;list-style-position:inside;padding:3px}li{color:#003}li.alpha{list-style-type:lower-alpha;margin-left:15px}p{font-size:.8em}input,select,textarea{font-size:1em;font-family:verdana,sans-serif}hr{border:0}#page_header{position:relative;z-index:2}#body{padding:12px .5% 2em 3px;min-height:20em;margin:0;width:100%}#left_column{width:84%;height:auto;padding-right:8px;padding-bottom:30px}#right_column{padding-left:16px;width:15%;min-width:160px}input{padding-left:3px}a.block_button,a.button{color:#114C8D;background-color:#FFf;padding:1px 6px;text-align:center;white-space:nowrap}a.block_button,a.button{font-size:11px;cursor:pointer}a.button{font-weight:400;-moz-border-radius:4px}a.block_button{border:1px solid #114C8D;-moz-border-radius:4px}input[type=button],input[type=reset],input[type=submit]{-moz-border-radius:4px;cursor:pointer;font-size:11px;padding:0 3px}input.cancel,input.ok{padding-left:12px;background-repeat:no-repeat;background-position:3px center}input[type=checkbox]{border:none}input[disabled],input[readonly]{background-color:#ddd}input.ok{background-image:url(/images/check.png)}input.cancel{background-image:url(/images/small_cancel.png)}#footer{color:#FFf;border-top:1px solid #003}#copyright{padding:5px;font-size:.6em;background-color:#114C8D}#footer_spacer_row{border-spacing:0;width:100%}#footer_spacer_row td{padding:0;border-bottom:1px solid #003;background-color:#F7CF07;height:2px;font-size:2px;line-height:2px}#logos{padding:5px}#plugin_box{width:100%;min-width:160px;padding:0;background-color:#EDF2F7;border:1px solid #114C8D;margin:0 0 2em}.plugin_header{font-size:.7em;font-weight:700;padding:2px;background-color:#114C8D;color:#FFf}#menu_group_head,.plugin td.field,.plugin td.field_center,.plugin td.label{background-color:#EDF2F7}ul.side_menu_list>li{color:#BEAC8B;font-size:.7em;font-weight:700;margin-left:.5%;list-style-type:none}ul.side_menu_sublist>li{font-size:.7em;color:#000;font-weight:400;margin-left:10%;list-style-position:outside}#job_info,.head td,.header_label,.page_buttons{font-weight:700}#plugin_box p{font-size:.7em;margin:0 0 3px 5%}.plugin{width:98%;margin:3px auto}.plugin td{font-size:.7em}.plugin tr.foot td{text-align:center;font-size:.7em}#main_menu{width:100%;position:absolute;margin:0;font-size:.7em;background-color:#F9F0E9;z-index:1}#menu_group_head{margin:0;position:relative;white-space:nowrap;font-weight:700;border-bottom:1px solid #114C8D;padding:3px 3px 2px;color:#114C8D}.note_form,.note_form_close,.tooltip,ul.menu_group{position:absolute}#menu_group_head>a{padding:4px 6px 2px}#menu_group_head>a:hover{cursor:pointer;color:#FFf;background-color:#114C8D}ul.menu_group{z-index:2;display:none;background-color:#EDF2F7;border:1px solid #114C8D;border-top:none;padding:2px 0 4px}ul.menu_group li{color:#114C8D;list-style:none;margin-top:4px;margin-bottom:4px;padding:2px 12px;font-size:1.05em}ul.menu_group>a:hover,ul.menu_group>a:hover>li,ul.menu_group>a>li:hover{text-decoration:none;color:#114C8D;background-color:#DDE1E6}#message_area,.tooltip{background-color:#EDF2F7;border:1px solid #114C8D}#message_area{color:#003;margin-left:.5%;margin-bottom:1em;padding:.2em 1% .5em}#message_area h2{margin:0 0 .5em;font-size:1em;font-style:italic}.page em,.page h1,.summary h1{font-style:normal}.message{font-size:.8em}.tooltip{font-size:10px;line-height:12px;width:20em;color:#114C8D;padding:5px;z-index:3}#job_buttons a.button,.link_bar a{background-color:#E5D9C3}#section_header{padding:5px;margin-right:8px}.header_details td{font-size:.6em}.link_bar,.page_buttons{font-size:.7em;text-align:center;white-space:nowrap}.header_label{padding-left:20px}.header_field{padding-left:5px}.page_buttons{margin:3px;width:74%}.link_bar{padding:3px 0 0;margin:-1px 8px 2em 0}.link_bar a{border:1px solid #8B7958;-moz-border-radius-bottomleft:4px;-moz-border-radius-bottomright:4px;border-top:none;padding:2px 3px 3px;margin-right:2px;white-space:nowrap}.link_bar a.selected,.link_bar a:hover{background-color:#BEAC8B;color:#114C8D;padding-top:3px;border:1px solid #8B7958;border-top:none}.page_menu li{margin:5px;font-size:.8em}.list,.report{margin-top:3px;border-collapse:collapse}#popup_header{padding:3px;text-align:center}#popup_body{background-color:#F9F0E9;padding-bottom:5px;padding-top:5px}.label_right,.narrow td.field,.narrow td.field_money{background-color:#F8F5F2}#popup_content{padding:.2em 1% 0}table{empty-cells:show}.head td{font-size:.7em;padding:3px}.head input{font-weight:400}.field_total,.list tr.foot td,.total{font-weight:700}.sub_head td{border:none;white-space:nowrap;font-size:10px}.bar,.field_total{border-top:1px solid #000}.label{padding:3px;font-size:.75em}.label_right{color:#8B7958;padding:3px 1em 3px 3px;font-size:.75em;text-align:right}.field_center,.sublabel{text-align:center}.sublabel{font-size:.6em;padding:0}.field,.field_center{padding:3px;font-size:.75em}.field_money,.field_total{padding:3px;font-size:.75em;text-align:right;white-space:nowrap}.field_nw{padding:3px;font-size:.75em;white-space:nowrap}.h_scrollable{overflow:-moz-scrollbars-horizontal}.v_scrollable{overflow:-moz-scrollbars-vertical}.scrollable{overflow:auto}.center,tr.head>td.center,tr.list_row>td.center{text-align:center}.left,tr.head>td.left,tr.list_row>td.left{text-align:left;padding-left:2em}.list tr.head td.right,.right,.total,tr.foot td.right,tr.foot td.total,tr.list_row td.right{text-align:right;padding-right:2em}.no_wrap{white-space:nowrap}.summary_spacer_row{line-height:2px}.light{color:#999}.detail,.fax_head,.narrow{border-spacing:1px;border-top:1px solid #8B7958;border-bottom:1px solid #8B7958;width:99%;padding:3px;margin-bottom:10px}.list,.page .header,.report,.sub_table{border-spacing:0}.detail td.label{width:16%}.detail td.field,.detail td.field_money{width:33%}.detail_spacer_row td{font-size:2px;line-height:2px;padding:0}.narrow{width:60%}.narrow td.label{width:50%}.narrow td.field,.narrow td.field_money,.narrow td.field_total{width:49%}.narrow td.field_money,.narrow td.field_total{padding-right:4em}.fax_head td.label{width:7%}.fax_head td.field{width:26%}.operation{width:1%}.wizard_buttons{font-size:.75em;margin:3px}.form{padding:1px}.form tr.head input{font-weight:400}.form tr.head td{padding:2px}.form tr.foot td{text-align:center;padding:2px}.list{width:99%}.list tr.head td{font-size:.7em;white-space:nowrap;padding-right:.65em;border-bottom:1px solid #8B7958}.list tr.head td span{display:inline-block;padding:5px 0}#footer,#main_menu,#message_area,#page_header,#right_column,.link_bar,.note_form,.page_buttons,.thread>tr,.tooltip,a.block_button,a.button,input[type=button],input[type=reset],input[type=submit],p a{display:none}.list table.sub_head td{border:none;white-space:nowrap;font-size:10px}.report,.report tr.foot td{border-top:1px solid #8B7958}.list tr.foot td{font-size:.7em}tr.list_row>td,tr.problem_row>td{font-size:.65em;padding:3px}tr.problem_row>td{background-color:#FDCCCC;border-bottom:1px dotted #8B7958}.report,.report tr.head td{border-bottom:1px solid #8B7958}tr.problem_row:hover td{background-color:#F8EEE4}.row_form td{font-size:.7em;padding:3px;white-space:nowrap}.row_form td.label{text-align:left;white-space:normal}.inline_header td{color:#8B7958;font-size:.6em;white-space:nowrap;text-align:center}.sub_table tr.head td{font-size:11px;padding:3px;background-color:#F9F0E9}.sub_table td{padding:3px}.report{width:80%}.graph,.note_form table.form{margin-top:2em}.report tr td{padding:4px 6px}.report tr.head td{font-size:.7em;white-space:nowrap;text-align:center}.report tr.foot td{font-size:.7em}.report tr.list_row>td{background-color:#EDF2F7;border-bottom:1px dotted #8B7958;font-size:.65em}.report tr.list_row:hover td{background-color:#F8EEE4}.report td.total_col{font-weight:700;border-left:1px dotted #8B7958;text-align:center;width:10%}.report tr.head td.group_col{text-align:left}.report td.group_col{font-weight:700;text-align:left;border-right:1px dotted #8B7958;width:12%}.graph{width:80%;margin-bottom:3em;text-align:center}.notification_list{border-collapse:collapse;border-spacing:0;width:99%}.notification_list tr.head td{font-size:.65em;white-space:nowrap;text-align:center}.notification_list tr.list_row td{padding:7px}div.notif_list_text{margin-bottom:1px;font-size:1.1em}.list_row>td.notif_list_job{text-align:center;font-weight:700;font-size:.65em;white-space:nowrap}.notif_select_column{width:2%;padding:0;text-align:center}.notif_job_column{width:8%;white-space:nowrap;padding-left:0;font-weight:700;text-align:center}.notif_notif_column{width:auto}.notif_date_column{width:15%;text-align:center;white-space:nowrap;padding-right:3px}table#topic_list{border-collapse:separate}.note_form{background-color:#F9F0E9;left:20%;border:2px solid #114C8D}.handle{background-color:#114C8D;color:#FFf;margin-bottom:3px;height:16px}.note_form_close{font-weight:700;font-size:9px;padding:0 2px;margin-right:2px;right:0;border:1px solid #114C8D}.list_row:hover>td table.add_note tr.add_note_foot td,.list_row:hover>td table.add_note tr.add_note_head td{background-color:#E5D9C3}.add_note td,.list_row:hover>td table.add_note tr td{background-color:#F9F0E9}.add_note td{border:none;padding:3px;font-size:9px}.add_note_head td{background-color:#E5D9C3;border-top:1px solid #8B7958;border-bottom:1px solid #8B7958;color:#8B7958;padding:3px;text-align:center;font-weight:700;font-size:9px}.add_note input,.add_note textarea{border:1px solid #114C8D;padding:1px 2px;color:#114C8D;background-color:#FFf;font-size:9px}.add_note textarea{font-family:verdana,sans-serif}.add_note select{color:#114C8D;background-color:#FFf;font-size:9px}.add_note_foot td{background-color:#E5D9C3;border-bottom:1px solid #8B7958;color:#8B7958;padding:3px;text-align:center;font-weight:700;font-size:9px}.note>td{padding-left:10px;border-bottom:1px dotted #E5D9C3}.note_author{font-size:.65em;text-align:center}.note p{margin-left:3%;font-size:.75em}td.note_indent{width:2%;border-bottom:none}.note_control td{padding-left:2%;padding-bottom:1%;font-weight:400;font-size:.6em}#special_conditions,.checkbox,.page em,.page table.money_table tr.foot td,.page td.field,.page td.field_total,.topic_title{font-weight:700}.note_title,.summary,.topic_title{font-size:.8em}.summary{padding:1%}.summary h1{color:#000}.page{background-color:#fff;margin-bottom:15px;margin-right:5px}.page table.header td{padding:0}.page table.header td h1{padding:0;margin:0}.page h1{color:#000}.page h3{color:#000;font-size:1em}.page p,.page table{font-size:.8em}.page p{text-align:justify}.page em{text-decoration:underline;margin-left:1%;margin-right:1%}.page table.money_table{font-size:1.1em;border-collapse:collapse;width:85%;margin-left:auto;margin-right:auto}.page table.money_table tr.foot td{font-size:1em;border-top:.4pt solid #000;background-color:#fff;color:#000}.page table.money_table tr.foot td.right{padding-right:1px}.page .written_field{border-bottom:.4pt solid #000}.page .indent *{margin-left:4em}.checkbox{border:1px solid #000;padding:1px 2px;font-size:7px}.page h1,.sa_head p{font-size:1em}table.signature_table{margin:2em auto}table.signature_table tr td{padding-top:1.5em;vertical-align:top;white-space:nowrap}#special_conditions{font-style:italic;margin-left:2em}.page hr{border-bottom:1px solid #000}.page table.detail,.page table.fax_head{margin-left:auto;margin-right:auto}.page .fax_head,.page .narrow{border:none}.page tr.head td{color:#000;background-color:#eee}.page td.field,.page td.field_money,.page td.field_total,.page td.label,.page td.label_right{background-color:#fff}.page td.label{color:#000;width:20%}.page td.label_right{color:#000}.page tr.detail_spacer_row td{background-color:#fff;border-top:1px solid #000}.page .header{border-collapse:collapse;padding:0}.page .header tr td{border-top:1px solid #000;border-bottom:1px solid #000;background-color:#eee}#body,input,select,textarea{background-color:#fff}@page{margin:.25in}#body pre,a:link,a:visited,h1,h2,pre,ul{color:#000}a:hover{text-decoration:none;color:#000}input,select,textarea{color:#000;border:1px solid #000}#section_header{background-color:#ddd;border:1px dashed #666}.detail,.detail_spacer_row td,.form,.list,.list tr.head>td,.notification_list,.notification_list tr.head td,.wizard{border-bottom:1px solid #000}.detail,.detail_spacer_row td,.form,.list,.list tr.foot td,.notification_list,.notification_list tr.foot td,.wizard{border-top:1px solid #000}.foot td,.head td,.label{color:#000;background-color:#fff}.sublabel{color:#000}.field,.field_center,.field_money,.field_nw,.field_total{color:#000;background-color:#fff}.detail td.label{background-color:#fff}.detail td.field,.detail td.field_total{font-weight:700;background-color:#eee}.detail td.field_money{background-color:#eee}#system_notif_table tr.list_row:hover>td,.detail_spacer_row td,.narrow td.label,tr.list_row:hover td{background-color:#fff}table#topic_list{border-bottom:1px solid #eee}.note>td{background-color:#fff border-bottom: 1px dotted #eee}.note p,.note td,.note:hover>td,.note:hover>td>p,.note_control td,.summary,body,td.note_indent{background-color:#fff}.note_author{border-right:1px dotted #eee}.topic_spacer td{line-height:2px;border-bottom:1px solid #000}.note_control td{border-bottom:1px dotted #eee}.problem .topic_title{color:#000}.summary{border:1px solid #000}.written_field{font-size:1em;border-bottom:1px solid #000}.page h2{color:#000;font-size:.9em}.foot td,.page{font-size:1em}@page{margin-bottom:.75in}body{color:#000}.detail td.field,.narrow td.field{text-align:left;padding-left:1em;background-color:#fff}.list tr.head td{background-color:#eee}tr.list_row>td{background-color:#fff;border-bottom:.7pt dotted #666}.list tr.foot td{background-color:#eee}.page{border:none;margin:none;width:auto;padding:0}.page>*>p,.page>p{font-size:.8em}table.signature_table{width:88%;font-size:.6em}#special_conditions{font-size:1.5em}.header h1,p.small{font-size:.8em}.page td{padding:1px}td.field,td.field_money,td.label{font-size:.7em}div#table_list table.list tr.head td.right{padding-right:1px}div#table_list table.list tr.list_row td.right span{display:inline-block;padding-right:1em}
    </style>
</head>
<body class="page">

<script type="text/php">

if ( isset($pdf) ) {

  $font = Font_Metrics::get_font("sans-serif");
  $size = 6;
  $color = array(0,0,0);
  $text_height = Font_Metrics::get_font_height($font, $size);

  $foot = $pdf->open_object();

  $w = $pdf->get_width();
  $h = $pdf->get_height();

  // Draw a line along the bottom
  $y = $h - 2.5 * $text_height - 24;
  $pdf->line(16, $y, $w - 16, $y, array(0,0,0), 1);

  $y += $text_height;

  // Add the job number
  $text = "Job: 404-135";
  $pdf->text(16, $y, $text, $font, $size, $color);

  $pdf->close_object();
  $pdf->add_object($foot, "all");


  if ( !"2004-11-18 17:19:38" ) {
    // Add an initals box if the document has not already been approved

    global $initials;
    $initials = $pdf->open_object();

    $text = "Initials:";
    $width = Font_Metrics::get_text_width($text, $font, $size);
    $pdf->text($w - 16 - $width - 38, $y, $text, $font, $size, $color);
    $pdf->rectangle($w - 16 - 36, $y - 2, 36, $text_height + 4, array(0.5,0.5,0.5), 0.5);

        $pdf->close_object();
    $pdf->add_object($initials);

  } else {

    // Mark the document as a duplicate if has been approved
    $watermark = $pdf->open_object();
    $pdf->text(110, $h - 240, "DUPLICATE", Font_Metrics::get_font("verdana", "bold"),
               110, array(0.5, 0.5, 0.5), 0, 0, -52);

    $text = "Approved: 2004-11-18";
    $width = Font_Metrics::get_text_width($text, $font, $size);
    $pdf->text($w - 16 - $width, $y, $text, $font, $size, $color);

    $pdf->close_object();
    $pdf->add_object($watermark, "all");
  }

  $text = "Page {PAGE_NUM} of {PAGE_COUNT}";
  $width = Font_Metrics::get_text_width("Page 1 of 2", $font, $size);

  $pdf->page_text($w / 2 - $width / 2, $y, $text, $font, $size, $color);

}
</script>

<div style="width: 100%;" class="header">
    <h1 style="text-align: center; margin-top:20px; padding: 10px 0;">
        <span style="font-family: firefly, DejaVu Sans, sans-serif;">BÁO CÁO DOANH SỐ</span>
    </h1>
</div>

<table class="detail" style="border-top: none; width:500px; margin: 10px auto; border-bottom: 1px dotted; clear: both;">
    <tbody>
    <tr>
        <td class="label">
            <span style="font-family: firefly, DejaVu Sans, sans-serif;">Từ ngày:</span>
        </td>
        <td class="field"><?=$this->Common->parseVietnameseDate($start_date)?></td>
        <td class="label">
            <span style="font-family: firefly, DejaVu Sans, sans-serif;">Đến ngày:</span>
        </td>
        <td class="field"><?=$this->Common->parseVietnameseDate($end_date)?></td>
    </tr>
    </tbody>
</table>

<div style="font-size: 0.8em">
    <table class="signature_table">
        <tbody><tr>
            <td><span style="font-family: firefly, DejaVu Sans, sans-serif;">Họ Tên:</span>
                <em><?=$user['name']?></em>
            </td>

            <td style="padding-left: 1em;"><br><br>

            </td>
        </tr>
        </tbody></table>
</div>

<div id="table_list" style="width: 100%;">
    <table class="list" style="width: 100%; margin-top: 1em;">
        <tr class="head" style="width: 99%;">
            <td class="center" style="width: 10%;">Ngày</td>

            <td class="center" style="width: 10%;">
                <span style="font-family: firefly, DejaVu Sans, sans-serif;">Xác nhận</span>
            </td>
            <td class="center" style="width: 5%;">
                <span style="font-family: firefly, DejaVu Sans, sans-serif;">Hủy</span>
            </td>
            <td class="center" style="width: 10%;">
                <span style="font-family: firefly, DejaVu Sans, sans-serif;">Thành công</span>
            </td>
            <td class="center" style="width: 10%;">
                <span style="font-family: firefly, DejaVu Sans, sans-serif;">chuyển hoàn</span>
            </td>
            <td class="center" style="width: 10%;">
                <span style="font-family: firefly, DejaVu Sans, sans-serif;">Doanh Thu <br/> Tạm Tính</span>
            </td>
            <td class="center" style="width: 10%;">
                <span style="font-family: firefly, DejaVu Sans, sans-serif;">Doanh Thu <br/> Thực</span>
            </td>
        </tr>

        <!-- loop -->
        <?php foreach ($data_dates as $date): ?>
            <tr class="list_row" style="width: 99%;">

                <td class="center" style="width: 10%;">
                    <span style="font-family: firefly, DejaVu Sans, sans-serif;"><?=$date['date']?></span>
                </td>
                <td class="center" style="width: 5%;">
                    <span><?=$date[7]['count']?></span>
                </td>
                <td class="right" style="width: 10%;">
                    <span><?=$date[9]['count'];?></span>
                </td>
                <td class="center" style="width: 5%;">
                    <span><?=$date[5]['count'];?></span>
                </td>
                <td class="right" style="width: 10%;">
                    <span><?=$date[6]['count'];?></span>
                </td>
                <td class="center" style="width: 10%;">
                    <span style="font-family: firefly, DejaVu Sans, sans-serif;">
                        <?=$this->Common->parseVietnameseCurrency($date['total'])?>
                    </span>
                </td>
                <td class="center" style="width: 10%;">
                    <span style="font-family: firefly, DejaVu Sans, sans-serif;">00</span>
                </td>
            </tr>
        <?php endforeach; ?>
        <tr class="list_row" style="width: 99%;">
            <td class="center" style="width: 10%;">
                <span style="font-family: firefly, DejaVu Sans, sans-serif;">Tổng</span>
            </td>
            <td class="center" style="width: 5%;">
                <span><?=$statuses[7]['count_all']?></span>
            </td>
            <td class="right" style="width: 10%;">
                <span><?=$statuses[9]['count_all'];?></span>
            </td>
            <td class="center" style="width: 5%;">
                <span><?=$statuses[5]['count_all'];?></span>
            </td>
            <td class="right" style="width: 10%;">
                <span><?=$statuses[6]['count_all'];?></span>
            </td>
            <td class="center" style="width: 10%;">
                <span style="font-family: firefly, DejaVu Sans, sans-serif;">
                    <?=$this->Common->parseVietnameseCurrency($total_sales);?>
                </span>
            </td>
            <td class="center" style="width: 10%;">
                <span style="font-family: firefly, DejaVu Sans, sans-serif;">00</span>
            </td>
        </tr>
    </table>
</div>

</body>
</html>
